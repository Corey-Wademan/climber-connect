(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{45:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),r=a(21),c=a.n(r),i=(a(45),a(3)),l=a(9),o=a.p+"static/media/climb-logo.bb628557.png",j=a(5),u=a(4),d=a.n(u),b=a(7),p=a(8),m=a.n(p),h="SET_ALERT",f="REMOVE_ALERT",x="REGISTER_SUCCESS",O="REGISTER_FAIL",g="USER_LOADED",v="AUTH_ERROR",y="LOGIN_SUCCESS",N="LOGIN_FAIL",w="LOGOUT",k="CLEAR_PROFILE",C="GET_PROFILE",_="GET_PROFILES",F="PROFILE_ERROR",S="DELETE_ACCOUNT",L="GET_POST",T="GET_POSTS",A="ADD_POSTS",P="DELETE_POST",E="POST_ERROR",R="UPDATE_LIKES",D="ADD_COMMENT",I="REMOVE_COMMENT",M=a(75),Y=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3;return function(n){var s=Object(M.a)();n({type:h,payload:{msg:e,alertType:t,id:s}}),setTimeout((function(){return n({type:f,payload:s})}),a)}},U=function(e){e?m.a.defaults.headers.common["x-auth-token"]=e:delete m.a.defaults.headers.common["x-auth-token"]},B=function(){return function(){var e=Object(b.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&U(localStorage.token),e.prev=1,e.next=4,m.a.get("/api/auth");case 4:a=e.sent,t({type:g,payload:a.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:v});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},G=a(0),q=Object(j.b)((function(e){return{auth:e.auth}}),{logout:function(){return function(e){e({type:k}),e({type:w})}}})((function(e){var t=e.auth,a=t.isAuth,s=t.loading,r=e.logout,c=Object(G.jsxs)("ul",{children:[Object(G.jsx)("li",{children:Object(G.jsx)(i.b,{to:"/profiles",children:"Climbers"})}),Object(G.jsx)("li",{children:Object(G.jsx)(i.b,{to:"/posts",children:"Posts"})}),Object(G.jsx)("li",{children:Object(G.jsxs)(i.b,{to:"/dashboard",children:[Object(G.jsx)("i",{className:"fas fa-user"})," ",Object(G.jsx)("span",{className:"hide-sm",children:"Dashboard"})]})}),Object(G.jsx)("li",{children:Object(G.jsxs)(i.b,{to:"/",onClick:r,href:"#!",children:[Object(G.jsx)("i",{className:"fas fa-sign-out-alt"})," ",Object(G.jsx)("span",{className:"hide-sm",children:"Logout"})]})})]}),l=Object(G.jsxs)("ul",{children:[Object(G.jsx)("li",{children:Object(G.jsx)(i.b,{to:"/profiles",children:"Climbers"})}),Object(G.jsx)("li",{children:Object(G.jsx)(i.b,{to:"/posts",children:"Posts"})}),Object(G.jsx)("li",{children:Object(G.jsx)(i.b,{to:"/register",children:"Register"})}),Object(G.jsx)("li",{children:Object(G.jsx)(i.b,{to:"/login",children:"Login"})})]});return Object(G.jsxs)("nav",{className:"navbar",children:[Object(G.jsx)("h1",{children:Object(G.jsxs)(i.b,{to:"/",children:[Object(G.jsx)("img",{alt:"logo",className:"logo",src:o})," Climbing Connecter"]})}),!s&&Object(G.jsx)(n.Fragment,{children:a?c:l})]})})),W=a(16),H=a.n(W),V=function(e){return e.isAuth?Object(G.jsx)(l.a,{to:"/dashboard"}):Object(G.jsx)("section",{className:"landing",children:Object(G.jsx)("div",{className:"dark-overlay",children:Object(G.jsxs)("div",{className:"landing-inner",children:[Object(G.jsx)("h1",{className:"x-large",children:"Climbing Connecter"}),Object(G.jsx)("p",{className:"lead",children:"Create a climbing profile, find climbing partners, add your climbing stats and recent climbs, share posts, message other climbers, spread the stoke."}),Object(G.jsxs)("div",{className:"buttons",children:[Object(G.jsx)(i.b,{to:"/register",className:"btn btn-primary",children:"Sign Up"}),Object(G.jsx)(i.b,{to:"/login",className:"btn btn-light",children:"Login"})]})]})})})};V.prototypes={isAuth:H.a.bool};var J=Object(j.b)((function(e){return{isAuth:e.auth.isAuth}}))(V),z=a(17),K=a(2),Q=a(10),X=Object(j.b)((function(e){return{isAuth:e.auth.isAuth}}),{login:function(e,t){return function(){var a=Object(b.a)(d.a.mark((function a(n){var s,r,c,i;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s={headers:{"Content-Type":"application/json"}},r=JSON.stringify({email:e,password:t}),a.prev=2,a.next=5,m.a.post("api/auth",r,s);case 5:c=a.sent,n({type:y,payload:c.data}),n(B()),a.next=15;break;case 10:a.prev=10,a.t0=a.catch(2),(i=a.t0.response.data.errors)&&i.forEach((function(e){return n(Y(e.msg,"danger"))})),n({type:N});case 15:case"end":return a.stop()}}),a,null,[[2,10]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.login,a=e.isAuth,s=Object(n.useState)({email:"",password:""}),r=Object(Q.a)(s,2),c=r[0],o=r[1],j=c.email,u=c.password,p=function(e){return o(Object(K.a)(Object(K.a)({},c),{},Object(z.a)({},e.target.name,e.target.value)))},m=function(){var e=Object(b.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),t(j,u);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a?Object(G.jsx)(l.a,{to:"/dashboard"}):Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("h1",{className:"large text-primary",children:"Sign In"}),Object(G.jsxs)("p",{className:"lead",children:[Object(G.jsx)("i",{className:"fas fa-user"})," Sign Into Your Account"]}),Object(G.jsxs)("form",{className:"form",action:"create-profile.html",onSubmit:function(e){return m(e)},children:[Object(G.jsx)("div",{className:"form-group",children:Object(G.jsx)("input",{type:"email",placeholder:"Email Address",name:"email",value:j,onChange:function(e){return p(e)},required:!0})}),Object(G.jsx)("div",{className:"form-group",children:Object(G.jsx)("input",{type:"password",placeholder:"Password",name:"password",minLength:"6",value:u,onChange:function(e){return p(e)},required:!0})}),Object(G.jsx)("input",{type:"submit",className:"btn btn-primary",value:"Login"})]}),Object(G.jsxs)("p",{className:"my-1",children:["Don't have an account? ",Object(G.jsx)(i.b,{to:"/register",children:"Sign Up"})]})]})})),Z=Object(j.b)((function(e){return{isAuth:e.auth.isAuth}}),{setAlert:Y,register:function(e){var t=e.name,a=e.email,n=e.password;return function(){var e=Object(b.a)(d.a.mark((function e(s){var r,c,i,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{"Content-Type":"application/json"}},c=JSON.stringify({name:t,email:a,password:n}),e.prev=2,e.next=5,m.a.post("api/users",c,r);case 5:i=e.sent,s({type:x,payload:i.data}),s(B()),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),(l=e.t0.response.data.errors)&&l.forEach((function(e){return s(Y(e.msg,"danger"))})),s({type:O});case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.setAlert,a=e.register,s=e.isAuth,r=Object(n.useState)({name:"",email:"",password:"",password2:""}),c=Object(Q.a)(r,2),o=c[0],j=c[1],u=o.name,p=o.email,m=o.password,h=o.password2,f=function(e){return j(Object(K.a)(Object(K.a)({},o),{},Object(z.a)({},e.target.name,e.target.value)))},x=function(){var e=Object(b.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),m!==h?t("Passwords do not match","danger"):a({name:u,email:p,password:m});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s?Object(G.jsx)(l.a,{to:"/dashboard"}):Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("h1",{className:"large text-primary",children:"Sign Up"}),Object(G.jsxs)("p",{className:"lead",children:[Object(G.jsx)("i",{className:"fas fa-user"})," Create Your Account"]}),Object(G.jsxs)("form",{className:"form",action:"create-profile.html",onSubmit:function(e){return x(e)},children:[Object(G.jsx)("div",{className:"form-group",children:Object(G.jsx)("input",{type:"text",placeholder:"Name",name:"name",value:u,onChange:function(e){return f(e)}})}),Object(G.jsx)("div",{className:"form-group",children:Object(G.jsx)("input",{type:"email",placeholder:"Email Address",name:"email",value:p,onChange:function(e){return f(e)}})}),Object(G.jsx)("div",{className:"form-group",children:Object(G.jsx)("input",{type:"password",placeholder:"Password",name:"password",minLength:"6",value:m,onChange:function(e){return f(e)}})}),Object(G.jsx)("div",{className:"form-group",children:Object(G.jsx)("input",{type:"password",placeholder:"Confirm Password",name:"password2",minLength:"6",value:h,onChange:function(e){return f(e)}})}),Object(G.jsx)("input",{type:"submit",className:"btn btn-primary",value:"Register"})]}),Object(G.jsxs)("p",{className:"my-1",children:["Already have an account? ",Object(G.jsx)(i.b,{to:"/login",children:"Sign In"})]})]})}));alert.propTypes={alerts:H.a.array.isRequired};var $=Object(j.b)((function(e){return{alerts:e.alert}}))((function(e){var t=e.alerts;return null!==t&&t.length>0&&t.map((function(e){return Object(G.jsx)("div",{className:"alert alert-".concat(e.alertType),children:e.msg},e.id)}))})),ee=function(){return function(){var e=Object(b.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("/api/profile/me");case 3:a=e.sent,t({type:C,payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:F,payload:{msg:e.t0.response.statusText,status:e.t0.response.status}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},te=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var n=Object(b.a)(d.a.mark((function n(s){var r,c,i;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r={headers:{"Content-Type":"application/json"}},n.next=4,m.a.post("/api/profile",e,r);case 4:c=n.sent,s({type:C,payload:c.data}),s(Y(a?"Profile Updated":"Profile Created","success")),a||t.push("/dashboard"),n.next=16;break;case 10:n.prev=10,n.t0=n.catch(0),(i=n.t0.response.data.errors)&&i.forEach((function(e){return s(Y(e.msg,"danger"))})),s({type:F,payload:{msg:n.t0.response.statusText,status:n.t0.response.status}});case 16:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()},ae=a.p+"static/media/spinner.438eee38.gif",ne=function(){return Object(G.jsx)(n.Fragment,{children:Object(G.jsx)("img",{src:ae,style:{width:"200px",margin:"auto",display:"block"},alt:"Loading"})})},se=function(e){var t=e.profile.user._id;return Object(G.jsxs)("div",{className:"dash-buttons",children:[Object(G.jsxs)(i.b,{to:"/profile/".concat(t),className:"btn btn-light",children:[Object(G.jsx)("i",{className:"fas fa-user-circle text-primary"})," View Profile"]}),Object(G.jsxs)(i.b,{to:"edit-profile",className:"btn btn-light",children:[Object(G.jsx)("i",{className:"fas fa-user-circle text-primary"})," Edit Profile"]})]})},re=Object(j.b)((function(e){return{auth:e.auth,profile:e.profile}}),{getCurrentProfile:ee,deleteAccount:function(){return function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you would like to delete your account?")){e.next=12;break}return e.prev=1,e.next=4,m.a.delete("api/profile");case 4:t({type:k}),t({type:S}),t(Y("Your account has been permanantly deleted")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:F,payload:{msg:e.t0.response.statusText,status:e.t0.response.status}});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.getCurrentProfile,a=e.deleteAccount,s=e.auth.user,r=e.profile,c=r.profile,l=r.loading;return Object(n.useEffect)((function(){t()}),[t]),l&&null===c?Object(G.jsx)(ne,{}):Object(G.jsxs)(n.Fragment,{children:[Object(G.jsx)("h1",{className:"large text-primary",children:"Dashboard"}),Object(G.jsx)("p",{className:"lead",children:Object(G.jsxs)("i",{className:"fas fa-user",children:[" Welcome ",s&&s.name.trim().split(" ")[0]]})}),null!==c?Object(G.jsxs)(n.Fragment,{children:[Object(G.jsx)(se,{profile:c}),Object(G.jsx)("div",{className:"my-2",children:Object(G.jsxs)("button",{className:"btn btn-danger",onClick:function(){return a()},children:[Object(G.jsx)("i",{className:"fas fa-user-times"})," Delete Account"]})})]}):Object(G.jsxs)(n.Fragment,{children:[Object(G.jsx)("p",{children:"You have not yet created a profile, join the community and add some info!"}),Object(G.jsx)(i.b,{to:"/create-profile",className:"btn btn-primary my-1",children:"Create Profile"})]})]})})),ce=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","District of Columbia","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Puerto Rico","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],ie=["5.0","5.1","5.2","5.3","5.4","5.5","5.6","5.7","5.8","5.9","5.10a","5.10b","5.10c","5.10d","5.11a","5.11b","5.11c","5.11d","5.12a","5.12b","5.12c","5.12d","5.13a","5.13b","5.13c","5.13d","5.14a","5.14b","5.14c","5.14d","5.15a","5.15b","5.15c","5.15d"],le=[{name:"Trad",id:1},{name:"Sport",id:2},{name:"Boulder",id:3}],oe=Object(j.b)(null,{createProfile:te})(Object(l.g)((function(e){var t=e.createProfile,a=e.history,s=Object(n.useState)({age:"",location:"",gender:"",preferred_belay_device:"",best_time:"",climbing_since:"",climbing_type:[],tradLead:"",sportLead:"",tradFollow:"",sportFollow:"",additional_info:"",twitter:"",facebook:"",instagram:"",youtube:""}),r=Object(Q.a)(s,2),c=r[0],l=r[1],o=Object(n.useState)(!1),j=Object(Q.a)(o,2),u=j[0],d=j[1],b=c.age,p=c.location,m=c.gender,h=c.preferred_belay_device,f=c.best_time,x=c.climbing_type,O=c.climbing_since,g=c.sportLead,v=c.tradLead,y=c.sportFollow,N=c.tradFollow,w=c.additional_info,k=c.twitter,C=c.facebook,_=c.instagram,F=c.youtube,S=new Date,L=S.getDate(),T=S.getMonth()+1,A=S.getFullYear();L<10&&(L="0"+L),T<10&&(T="0"+T),S=A+"-"+T+"-"+L;var P=function(e){return l(Object(K.a)(Object(K.a)({},c),{},Object(z.a)({},e.target.name,e.target.value)))};return Object(G.jsxs)(n.Fragment,{children:[Object(G.jsx)("h1",{className:"large text-primary",children:"Create Your Profile"}),Object(G.jsxs)("p",{className:"lead",children:[Object(G.jsx)("i",{className:"fas fa-user"})," Let's add some info to your climbing profile"]}),Object(G.jsx)("small",{children:"* = required field"}),Object(G.jsxs)("form",{className:"form",onSubmit:function(e){return function(e){e.preventDefault(),t(c,a)}(e)},children:[Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsxs)("select",{required:!0,name:"location",value:p,onChange:function(e){return P(e)},children:[Object(G.jsx)("option",{value:"",disabled:!0,children:"*Location"}),ce.map((function(e){return Object(G.jsx)("option",{value:e,children:e},e)}))]}),Object(G.jsx)("small",{className:"form-text",children:"* Your location to find other climbers near you "})]}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("input",{type:"text",placeholder:"*Age",name:"age",value:b,onChange:function(e){return P(e)}}),Object(G.jsx)("small",{className:"form-text",children:"* Helps for identifying & matching similarly aged users"})]}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("h1",{children:" Climbing Types"}),le.map((function(e){return Object(G.jsxs)("label",{children:[Object(G.jsx)("input",{type:"checkbox",name:e.name,value:e.name,onChange:function(){return function(e){var t=x,a=t.indexOf(e);a>-1?t.splice(a,1):t.push(e),l(Object(K.a)(Object(K.a)({},c),{},{climbing_type:t}))}(e.name)},selected:x.includes(e.id)})," ",e.name,Object(G.jsx)("br",{})]},e.id)})),Object(G.jsx)("small",{className:"form-text",children:"Select your types of climbing"})]}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("h1",{children:"Leads"}),Object(G.jsx)("small",{className:"form-text",children:"Trad Lead"}),Object(G.jsx)("select",{name:"tradLead",value:v,onChange:function(e){return P(e)},children:ie.map((function(e){return Object(G.jsx)("option",{value:e,children:e},e)}))}),Object(G.jsx)("br",{}),Object(G.jsx)("small",{className:"form-text",children:"Sport Lead"}),Object(G.jsx)("select",{name:"sportLead",value:g,onChange:function(e){return P(e)},children:ie.map((function(e){return Object(G.jsx)("option",{value:e,children:e},e)}))}),Object(G.jsx)("small",{className:"form-text",children:"Select the grades you can currently lead"})]}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("h1",{children:"Follows"}),Object(G.jsx)("small",{className:"form-text",children:"Trad Follow"}),Object(G.jsx)("select",{name:"tradFollow",value:N,onChange:function(e){return P(e)},children:ie.map((function(e){return Object(G.jsx)("option",{value:e,children:e},e)}))}),Object(G.jsx)("br",{}),Object(G.jsx)("small",{className:"form-text",children:"Sport Follow"}),Object(G.jsx)("select",{name:"sportFollow",value:y,onChange:function(e){return P(e)},children:ie.map((function(e){return Object(G.jsx)("option",{value:e,children:e},e)}))}),Object(G.jsx)("small",{className:"form-text",children:"Select the grades you currently follow / clean"})]}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsxs)("select",{type:"text",name:"preferred_belay_device",value:h,onChange:function(e){return P(e)},children:[Object(G.jsx)("option",{value:"",disabled:!0,children:"Belay Device"}),Object(G.jsx)("option",{value:"ATC",children:"ATC"}),Object(G.jsx)("option",{value:"Assisted Braking",children:"Assisted Braking"}),Object(G.jsx)("option",{value:"Figure Eight",children:"Figure Eight"})]}),Object(G.jsx)("small",{className:"form-text",children:"Select your preferred belay device"})]}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("textarea",{placeholder:"A short bio of yourself",name:"additional_info",value:w,onChange:function(e){return P(e)}}),Object(G.jsx)("small",{className:"form-text",children:"Tell us a little about yourself and what else you like to do"})]}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("input",{type:"text",placeholder:"Best Availabilty to Climb",name:"best_time",value:f,onChange:function(e){return P(e)}}),Object(G.jsx)("small",{className:"form-text",children:"ie. (Weekends / Wednesdays after 5pm)"})]}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsxs)("select",{required:!0,type:"text",placeholder:"Gender",name:"gender",value:m,onChange:function(e){return P(e)},children:[Object(G.jsx)("option",{value:"",disabled:!0,children:"*Gender"}),Object(G.jsx)("option",{value:"Male",children:"Male"}),Object(G.jsx)("option",{value:"Female",children:"Female"})]}),Object(G.jsx)("small",{className:"form-text",children:"* Helps for filtering potential climbing partners"})]}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("label",{children:"Climbing Since:"}),Object(G.jsx)("input",{type:"date",id:"climbing_since",name:"climbing_since",max:S,value:O,onChange:function(e){return P(e)}})]}),Object(G.jsxs)("div",{className:"my-2",children:[Object(G.jsx)("button",{onClick:function(){return d(!u)},type:"button",className:"btn btn-light",children:"Add Social Network Links"}),Object(G.jsx)("span",{children:"Optional"})]}),u&&Object(G.jsxs)(n.Fragment,{children:[Object(G.jsxs)("div",{className:"form-group social-input",children:[Object(G.jsx)("i",{className:"fab fa-twitter fa-2x"}),Object(G.jsx)("input",{type:"text",placeholder:"Twitter URL",name:"twitter",value:k,onChange:function(e){return P(e)}})]}),Object(G.jsxs)("div",{className:"form-group social-input",children:[Object(G.jsx)("i",{className:"fab fa-facebook fa-2x"}),Object(G.jsx)("input",{type:"text",placeholder:"Facebook URL",name:"facebook",value:C,onChange:function(e){return P(e)}})]}),Object(G.jsxs)("div",{className:"form-group social-input",children:[Object(G.jsx)("i",{className:"fab fa-youtube fa-2x"}),Object(G.jsx)("input",{type:"text",placeholder:"YouTube URL",name:"youtube",value:F,onChange:function(e){return P(e)}})]}),Object(G.jsxs)("div",{className:"form-group social-input",children:[Object(G.jsx)("i",{className:"fab fa-instagram fa-2x"}),Object(G.jsx)("input",{type:"text",placeholder:"Instagram URL",name:"instagram",value:_,onChange:function(e){return P(e)}})]})]}),Object(G.jsx)("input",{type:"submit",className:"btn btn-primary my-1"}),Object(G.jsx)(i.b,{className:"btn btn-light my-1",to:"/dashboard",children:"Go Back"})]})]})}))),je=Object(j.b)((function(e){return{profile:e.profile}}),{createProfile:te,getCurrentProfile:ee})(Object(l.g)((function(e){var t=e.profile,a=t.profile,s=t.loading,r=e.createProfile,c=e.getCurrentProfile,l=e.history,o=Object(n.useState)({age:"",location:"",gender:"",preferred_belay_device:"",best_time:"",climbing_since:"",climbing_type:[],tradLead:"",sportLead:"",tradFollow:"",sportFollow:"",additional_info:"",twitter:"",facebook:"",instagram:"",youtube:""}),j=Object(Q.a)(o,2),u=j[0],d=j[1],b=Object(n.useState)(!1),p=Object(Q.a)(b,2),m=p[0],h=p[1];Object(n.useEffect)((function(){c(),d({age:s||!a.age?"":a.age,location:s||!a.location?"":a.location,gender:s||!a.gender?"":a.gender,preferred_belay_device:s||!a.preferred_belay_device?"":a.preferred_belay_device,best_time:s||!a.best_time?"":a.best_time,climbing_since:s||!a.climbing_since?"":a.climbing_since,climbing_type:s||!a.climbing_type?"":a.climbing_type,tradLead:s||!a.leads.tradLead?"":a.leads.tradLead,sportLead:s||!a.leads.sportLead?"":a.leads.sportLead,tradFollow:s||!a.follows.tradFollow?"":a.follows.tradFollow,sportFollow:s||!a.follows.sportFollow?"":a.follows.sportFollow,additional_info:s||!a.additional_info?"":a.additional_info,twitter:s||!a.social?"":a.social.twitter,facebook:s||!a.social?"":a.social.facebook,instagram:s||!a.social?"":a.social.instagram,youtube:s||!a.social?"":a.social.youtube})}),[s,c]);var f=u.age,x=u.location,O=u.gender,g=u.preferred_belay_device,v=u.best_time,y=u.climbing_type,N=u.climbing_since,w=u.sportLead,k=u.tradLead,C=u.sportFollow,_=u.tradFollow,F=u.additional_info,S=u.twitter,L=u.facebook,T=u.instagram,A=u.youtube,P=new Date,E=P.getDate(),R=P.getMonth()+1,D=P.getFullYear();E<10&&(E="0"+E),R<10&&(R="0"+R),P=D+"-"+R+"-"+E;var I=function(e){return d(Object(K.a)(Object(K.a)({},u),{},Object(z.a)({},e.target.name,e.target.value)))};return Object(G.jsxs)(n.Fragment,{children:[Object(G.jsx)("h1",{className:"large text-primary",children:"Edit Profile"}),Object(G.jsxs)("p",{className:"lead",children:[Object(G.jsx)("i",{className:"fas fa-user"})," Climbing harder? Update your profile"]}),Object(G.jsx)("small",{children:"* = required field"}),Object(G.jsxs)("form",{className:"form",onSubmit:function(e){return function(e){e.preventDefault(),r(u,l,!0)}(e)},children:[Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsxs)("select",{required:!0,name:"location",value:x,onChange:function(e){return I(e)},children:[Object(G.jsx)("option",{value:"",disabled:!0,children:"*Location"}),ce.map((function(e){return Object(G.jsx)("option",{value:e,children:e},e)}))]}),Object(G.jsx)("small",{className:"form-text",children:"* Your location to find other climbers near you "})]}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("input",{type:"text",placeholder:"*Age",name:"age",value:f,onChange:function(e){return I(e)}}),Object(G.jsx)("small",{className:"form-text",children:"* Helps for identifying & matching similarly aged users"})]}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("h1",{children:" Climbing Types"}),le.map((function(e){return Object(G.jsxs)("label",{children:[Object(G.jsx)("input",{type:"checkbox",name:e.name,checked:y.includes(e.name),value:e.name,onChange:function(){return function(e){var t=y,a=t.indexOf(e);a>-1?t.splice(a,1):t.push(e),d(Object(K.a)(Object(K.a)({},u),{},{climbing_type:t}))}(e.name)}}),e.name,Object(G.jsx)("br",{})]},e.id)})),Object(G.jsx)("small",{className:"form-text",children:"Select your types of climbing"})]}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("h1",{children:"Leads"}),Object(G.jsx)("small",{className:"form-text",children:"Trad Lead"}),Object(G.jsx)("select",{name:"tradLead",value:k,onChange:function(e){return I(e)},children:ie.map((function(e){return Object(G.jsx)("option",{value:e,children:e},e)}))}),Object(G.jsx)("br",{}),Object(G.jsx)("small",{className:"form-text",children:"Sport Lead"}),Object(G.jsx)("select",{name:"sportLead",value:w,onChange:function(e){return I(e)},children:ie.map((function(e){return Object(G.jsx)("option",{value:e,children:e},e)}))}),Object(G.jsx)("small",{className:"form-text",children:"Select the grades you can currently lead"})]}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("h1",{children:"Follows"}),Object(G.jsx)("small",{className:"form-text",children:"Trad Follow"}),Object(G.jsx)("select",{name:"tradFollow",value:_,onChange:function(e){return I(e)},children:ie.map((function(e){return Object(G.jsx)("option",{value:e,children:e},e)}))}),Object(G.jsx)("br",{}),Object(G.jsx)("small",{className:"form-text",children:"Sport Follow"}),Object(G.jsx)("select",{name:"sportFollow",value:C,onChange:function(e){return I(e)},children:ie.map((function(e){return Object(G.jsx)("option",{value:e,children:e},e)}))}),Object(G.jsx)("small",{className:"form-text",children:"Select the grades you currently follow / clean"})]}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsxs)("select",{type:"text",name:"preferred_belay_device",value:g,onChange:function(e){return I(e)},children:[Object(G.jsx)("option",{value:"",disabled:!0,children:"Belay Device"}),Object(G.jsx)("option",{value:"ATC",children:"ATC"}),Object(G.jsx)("option",{value:"Assisted Braking",children:"Assisted Braking"}),Object(G.jsx)("option",{value:"Figure Eight",children:"Figure Eight"})]}),Object(G.jsx)("small",{className:"form-text",children:"Select your preferred belay device"})]}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("textarea",{placeholder:"A short bio of yourself",name:"additional_info",value:F,onChange:function(e){return I(e)}}),Object(G.jsx)("small",{className:"form-text",children:"Tell us a little about yourself and what else you like to do"})]}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("input",{type:"text",placeholder:"Best Availabilty to Climb",name:"best_time",value:v,onChange:function(e){return I(e)}}),Object(G.jsx)("small",{className:"form-text",children:"Your best availabilty to climb ie. (Weekends / Wednesdays after 5pm)"})]}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsxs)("select",{required:!0,type:"text",placeholder:"Gender",name:"gender",value:O,onChange:function(e){return I(e)},children:[Object(G.jsx)("option",{value:"",disabled:!0,children:"*Gender"}),Object(G.jsx)("option",{value:"Male",children:"Male"}),Object(G.jsx)("option",{value:"Female",children:"Female"})]}),Object(G.jsx)("small",{className:"form-text",children:"* Helps for filtering potential climbing partners"})]}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("label",{children:"Climbing Since:"}),Object(G.jsx)("input",{type:"date",id:"climbing_since",name:"climbing_since",max:P,value:N,onChange:function(e){return I(e)}})]}),Object(G.jsxs)("div",{className:"my-2",children:[Object(G.jsx)("button",{onClick:function(){return h(!m)},type:"button",className:"btn btn-light",children:"Add Social Network Links"}),Object(G.jsx)("span",{children:"Optional"})]}),m&&Object(G.jsxs)(n.Fragment,{children:[Object(G.jsxs)("div",{className:"form-group social-input",children:[Object(G.jsx)("i",{className:"fab fa-twitter fa-2x"}),Object(G.jsx)("input",{type:"text",placeholder:"Twitter URL",name:"twitter",value:S,onChange:function(e){return I(e)}})]}),Object(G.jsxs)("div",{className:"form-group social-input",children:[Object(G.jsx)("i",{className:"fab fa-facebook fa-2x"}),Object(G.jsx)("input",{type:"text",placeholder:"Facebook URL",name:"facebook",value:L,onChange:function(e){return I(e)}})]}),Object(G.jsxs)("div",{className:"form-group social-input",children:[Object(G.jsx)("i",{className:"fab fa-youtube fa-2x"}),Object(G.jsx)("input",{type:"text",placeholder:"YouTube URL",name:"youtube",value:A,onChange:function(e){return I(e)}})]}),Object(G.jsxs)("div",{className:"form-group social-input",children:[Object(G.jsx)("i",{className:"fab fa-instagram fa-2x"}),Object(G.jsx)("input",{type:"text",placeholder:"Instagram URL",name:"instagram",value:T,onChange:function(e){return I(e)}})]})]}),Object(G.jsx)("input",{type:"submit",className:"btn btn-primary my-1"}),Object(G.jsx)(i.b,{className:"btn btn-light my-1",to:"/dashboard",children:"Go Back"})]})]})}))),ue=function(e){var t=e.profile,a=t.user,n=a._id,s=a.name,r=a.avatar,c=t.age,l=t.location,o=t.climbing_type,j=t.best_time,u=t.leads,d=t.gender,b=t.preferred_belay_device,p=t.additional_info;return Object(G.jsxs)("div",{className:"profile list-item",children:[Object(G.jsx)("img",{src:r,alt:"",className:"profiles-img"}),Object(G.jsxs)("div",{className:"profile-col",children:[Object(G.jsx)("h2",{children:s}),Object(G.jsx)("p",{children:l}),Object(G.jsx)("p",{children:c}),Object(G.jsx)("p",{children:d}),Object(G.jsx)(i.b,{to:"/profile/".concat(n),className:"profiles-btn btn-primary",children:"View Profile"})]}),Object(G.jsxs)("div",{className:"profile-col",children:[Object(G.jsx)("p",{children:o&&Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("b",{children:"Climbs:"})," ",o.toString().split()]})}),Object(G.jsx)("p",{children:u&&u.tradLead?Object(G.jsxs)(G.Fragment,{children:[" ",Object(G.jsx)("b",{children:"Trad Leads:"})," ",u.tradLead," "]}):Object(G.jsx)(G.Fragment,{children:" "})}),Object(G.jsx)("p",{children:u&&u.sportLead?Object(G.jsxs)(G.Fragment,{children:[" ",Object(G.jsx)("b",{children:"Sport Leads:"})," ",u.sportLead," "]}):Object(G.jsx)(G.Fragment,{children:" "})}),Object(G.jsx)("p",{children:b&&Object(G.jsxs)(G.Fragment,{children:[" ",Object(G.jsx)("b",{children:"Belay Device:"})," ",b," "]})}),Object(G.jsx)("p",{children:j&&Object(G.jsxs)(G.Fragment,{children:[" ",Object(G.jsx)("b",{children:"Best Time To Climb:"})," ",j," "]})}),Object(G.jsx)("p",{children:p&&Object(G.jsxs)(G.Fragment,{children:[" ",Object(G.jsx)("b",{children:"About Me:"})," ",p," "]})})]})]})},de=Object(j.b)((function(e){return{profile:e.profile}}),{getProfiles:function(){return function(){var e=Object(b.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:k}),e.prev=1,e.next=4,m.a.get("/api/profile/");case 4:a=e.sent,t({type:_,payload:a.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:F,payload:{msg:e.t0.response.statusText,status:e.t0.response.status}});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.getProfiles,a=e.profile,s=a.profiles,r=a.loading;return Object(n.useEffect)((function(){t()}),[t]),Object(G.jsx)(n.Fragment,{children:r?Object(G.jsx)(ne,{}):Object(G.jsxs)(n.Fragment,{children:[Object(G.jsx)("h1",{className:"large text-primary",children:"Climbers"}),Object(G.jsx)("p",{className:"lead",children:Object(G.jsx)("i",{className:"fas fa-hiking",children:" Find and link up with other climbers in your area"})}),Object(G.jsx)("div",{className:"profiles",children:s.length>0?s.map((function(e){return Object(G.jsx)(ue,{profile:e},e._id)})):Object(G.jsx)("h4",{children:"No profiles found "})})]})})}));var be=function(e){return(new Intl.DateTimeFormat).format(new Date(e))},pe=function(e){var t=e.profile,a=t.age,n=t.location,s=t.gender,r=t.social,c=t.member_since,i=t.user,l=i.name,o=i.avatar;return Object(G.jsxs)("div",{className:"profile-main bg-light p-2",children:[Object(G.jsx)("img",{className:"round-img my-1",src:o,alt:""}),Object(G.jsx)("h1",{className:"large",children:l}),Object(G.jsx)("p",{children:a}),Object(G.jsx)("p",{children:s}),Object(G.jsx)("p",{children:n}),Object(G.jsxs)("p",{children:["Member Since: ",be(c)]}),Object(G.jsxs)("div",{className:"icons my-1",children:[r&&r.twitter&&Object(G.jsx)("a",{href:r.twitter,target:"_blank",rel:"noopener noreferrer",children:Object(G.jsx)("i",{className:"fab tran fa-twitter fa-2x"})}),r&&r.facebook&&Object(G.jsx)("a",{href:r.facebook,target:"_blank",rel:"noopener noreferrer",children:Object(G.jsx)("i",{className:"fab tran fa-facebook fa-2x"})}),r&&r.youtube&&Object(G.jsx)("a",{href:r.youtube,target:"_blank",rel:"noopener noreferrer",children:Object(G.jsx)("i",{className:"fab tran fa-youtube fa-2x"})}),r&&r.instagram&&Object(G.jsx)("a",{href:r.instagram,target:"_blank",rel:"noopener noreferrer",children:Object(G.jsx)("i",{className:"fab tran fa-instagram fa-2x"})})]})]})},me=function(e){var t=e.profile,a=t.climbing_type,s=t.preferred_belay_device,r=t.leads,c=t.follows,i=t.additional_info,l=t.best_time,o=t.climbing_since,j=t.user.name;return Object(G.jsxs)("div",{className:"profile-about bg-light p-2",children:[Object(G.jsx)("h2",{className:"text-primary text-center",children:"Climbing Profile"}),Object(G.jsx)("p",{children:o&&Object(G.jsxs)("span",{children:["Climbing Since: ",be(o)]})}),Object(G.jsxs)("div",{className:"climbing-type",children:[Object(G.jsx)("b",{children:"Climbs:"}),Object(G.jsx)("div",{className:"col",children:a.map((function(e,t){return Object(G.jsxs)("div",{className:"p",children:[Object(G.jsx)("i",{className:"fas fa-check"})," ",e]},t)}))}),r&&Object(G.jsx)(n.Fragment,{children:Object(G.jsxs)("div",{className:"col",children:[Object(G.jsxs)("div",{className:"row",children:[Object(G.jsx)("b",{children:"Trad Lead: "}),Object(G.jsx)("span",{children:r.tradLead})]}),Object(G.jsxs)("div",{className:"row",children:[Object(G.jsx)("b",{children:"Sport Lead: "}),Object(G.jsx)("span",{children:r.sportLead})]})]})}),c&&Object(G.jsx)(n.Fragment,{children:Object(G.jsxs)("div",{className:"col",children:[Object(G.jsxs)("div",{className:"row",children:[Object(G.jsx)("b",{children:"Trad Follow: "}),Object(G.jsx)("span",{children:c.tradFollow})]}),Object(G.jsxs)("div",{className:"row",children:[Object(G.jsx)("b",{children:"Sport Follow: "}),Object(G.jsxs)("span",{children:[" ",c.sportFollow]})]})]})})]}),s&&Object(G.jsx)(n.Fragment,{children:Object(G.jsxs)("div",{children:[Object(G.jsx)("b",{children:"Belaying Device:"})," ",s]})}),Object(G.jsx)("div",{className:"line"}),Object(G.jsx)("div",{children:i&&Object(G.jsxs)(n.Fragment,{children:[Object(G.jsxs)("h2",{className:"text-primary",children:["About ",j.trim().split(" ")[0]]}),Object(G.jsx)("p",{children:i}),Object(G.jsx)("div",{className:"about-climb",children:l&&Object(G.jsxs)("p",{children:[Object(G.jsx)("b",{children:"Best Time To Climb:"})," ",l]})})]})})]})},he=Object(j.b)((function(e){return{profile:e.profile,auth:e.auth}}),{getProfileById:function(e){return function(){var t=Object(b.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.get("/api/profile/user/".concat(e));case 3:n=t.sent,a({type:C,payload:n.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:F,payload:{msg:t.t0.response.statusText,status:t.t0.response.status}});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.getProfileById,a=e.profile,s=a.profile,r=a.loading,c=e.auth,l=e.match;return Object(n.useEffect)((function(){t(l.params.id)}),[t,l.params.id]),Object(G.jsx)(n.Fragment,{children:null===s||r?Object(G.jsx)(ne,{}):Object(G.jsxs)(n.Fragment,{children:[Object(G.jsx)(i.b,{to:"/profiles",className:"btn btn-dark",children:"Back To Profiles"}),c.isAuth&&!1===c.loading&&c.user._id===s.user._id&&Object(G.jsx)(i.b,{to:"/edit-profile",className:"btn btn-dark",children:"Edit Profile"}),Object(G.jsxs)("div",{className:"profile-header my-1",children:[Object(G.jsx)(pe,{profile:s}),Object(G.jsx)(me,{profile:s})]})]})})})),fe=a(24),xe=a.n(fe),Oe=function(e){var t=e.deletePost,a=e.auth,s=e.addLike,r=e.removeLike,c=e.showActions,l=e.post,o=l._id,j=l.text,u=l.name,d=l.avatar,b=l.user,p=l.date,m=l.comments,h=l.likes;return Object(G.jsx)("div",{className:"posts",children:Object(G.jsxs)("div",{className:"post bg-dark list-item my-1",children:[Object(G.jsx)("div",{children:Object(G.jsxs)(i.b,{to:"/profile/".concat(b),children:[Object(G.jsx)("img",{className:"post-img",src:d,alt:""}),Object(G.jsx)("h4",{children:u})]})}),Object(G.jsxs)("div",{className:"post-details",children:[Object(G.jsxs)("div",{className:"post-text",children:[Object(G.jsx)("p",{className:"my-1",children:j}),Object(G.jsxs)("p",{className:"post-date",children:["Posted on ",Object(G.jsx)(xe.a,{format:"MM/DD/YYYY",children:p})]})]}),Object(G.jsx)("div",{className:"post-btns",children:c&&Object(G.jsxs)(n.Fragment,{children:[Object(G.jsxs)("button",{onClick:function(e){return s(o)},type:"button",className:"btn btn-light",children:[Object(G.jsx)("i",{className:"fas fa-thumbs-up"}),h.length>0&&Object(G.jsxs)("span",{children:[" ",h.length]})]}),Object(G.jsx)("button",{onClick:function(e){return r(o)},type:"button",className:"btn btn-light",children:Object(G.jsx)("i",{className:"fas fa-thumbs-down"})}),Object(G.jsxs)(i.b,{to:"/posts/".concat(o),className:"btn btn-primary",children:["Discussion",m.length>0&&Object(G.jsx)("span",{className:"comment-count",children:m.length})]}),!a.loading&&b===a.user._id&&Object(G.jsx)("button",{onClick:function(e){return t(o)},type:"button",className:"btn btn-danger",children:Object(G.jsx)("i",{className:"fas fa-times"})})]})})]})]})})};Oe.defaultProps={showActions:!0};var ge=Object(j.b)((function(e){return{auth:e.auth}}),{addLike:function(e){return function(){var t=Object(b.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.put("/api/posts/like/".concat(e));case 3:n=t.sent,a({type:R,payload:{id:e,likes:n.data}}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:E,payload:{msg:t.t0.response.statusText,status:t.t0.response.status}});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},removeLike:function(e){return function(){var t=Object(b.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.put("/api/posts/unlike/".concat(e));case 3:n=t.sent,a({type:R,payload:{id:e,likes:n.data}}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:E,payload:{msg:t.t0.response.statusText,status:t.t0.response.status}});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},deletePost:function(e){return function(){var t=Object(b.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.delete("/api/posts/".concat(e));case 3:a({type:P,payload:e}),a(Y("Post Removed","danger")),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:E,payload:{msg:t.t0.response.statusText,status:t.t0.response.status}});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}})(Oe),ve=Object(j.b)(null,{addPost:function(e){return function(){var t=Object(b.a)(d.a.mark((function t(a){var n,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{"Content-Type":"application/json"}},t.prev=1,t.next=4,m.a.post("/api/posts",e,n);case 4:s=t.sent,a({type:A,payload:s.data}),a(Y("Post Created","success")),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),a({type:E,payload:{msg:t.t0.response.statusText,status:t.t0.response.status}});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.addPost,a=Object(n.useState)(""),s=Object(Q.a)(a,2),r=s[0],c=s[1];return Object(G.jsx)("div",{className:"post-form",children:Object(G.jsx)("form",{autoComplete:"off",onSubmit:function(e){e.preventDefault(),t({text:r}),c("")},className:"form my-1",children:Object(G.jsxs)("div",{className:"post-bar",children:[Object(G.jsx)("input",{className:"post-bar-in",name:"text",cols:"30",rows:"5",value:r,onChange:function(e){return c(e.target.value)},placeholder:"Create a post",required:!0}),Object(G.jsx)("button",{type:"submit",className:"post-bar-btn",value:"Submit",children:Object(G.jsx)("i",{class:"fas fa-share"})})]})})})})),ye=Object(j.b)((function(e){return{post:e.post,auth:e.auth,profile:e.profile}}),{getPosts:function(){return function(){var e=Object(b.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("/api/posts");case 3:a=e.sent,t({type:T,payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:E,payload:{msg:e.t0.response.statusText,status:e.t0.response.status}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},getCurrentProfile:ee})((function(e){var t=e.getPosts,a=e.getCurrentProfile,s=e.profile.profile,r=e.auth.isAuth,c=e.post,l=c.posts,o=c.loading;return Object(n.useEffect)((function(){t(),a()}),[t,a]),r?o?Object(G.jsx)(ne,{}):Object(G.jsxs)(n.Fragment,{children:[Object(G.jsx)("h1",{className:"large text-primary",children:"Posts"}),Object(G.jsxs)("p",{className:"lead",children:[Object(G.jsx)("i",{className:"fas fa-user"}),"Welcome to the ___ community"]}),s&&Object(G.jsx)(ve,{}),!s&&Object(G.jsxs)("p",{children:["You have not finished creating your profile, please",Object(G.jsx)(i.b,{to:"/create-profile",children:" create one "}),"to join the discussion"]}),Object(G.jsx)("div",{className:"posts",children:l.map((function(e){return Object(G.jsx)(ge,{post:e},e._id)}))})]}):Object(G.jsx)(n.Fragment,{children:Object(G.jsxs)("h3",{children:["Only users can view posts, please",Object(G.jsx)(i.b,{to:"/login",children:" login "})," or",Object(G.jsx)(i.b,{to:"/register",children:" create an account "}),"to create & view posts"]})})})),Ne=Object(j.b)(null,{addComment:function(e,t){return function(){var a=Object(b.a)(d.a.mark((function a(n){var s,r;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s={headers:{"Content-Type":"application/json"}},a.prev=1,a.next=4,m.a.post("/api/posts/comment/".concat(e),t,s);case 4:r=a.sent,n({type:D,payload:r.data}),n(Y("Comment posted","success")),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),n({type:E,payload:{msg:a.t0.response.statusText,status:a.t0.response.status}});case 12:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.postId,a=e.addComment,s=Object(n.useState)(""),r=Object(Q.a)(s,2),c=r[0],i=r[1];return Object(G.jsxs)("div",{className:"post-form",children:[Object(G.jsx)("div",{className:"lg-line"}),Object(G.jsx)("form",{autoComplete:"off",onSubmit:function(e){e.preventDefault(),a(t,{text:c}),i("")},className:"form my-1",children:Object(G.jsxs)("div",{className:"post-bar",children:[Object(G.jsx)("input",{className:"post-bar-in",name:"text",cols:"30",rows:"5",value:c,onChange:function(e){return i(e.target.value)},placeholder:"Reply",required:!0}),Object(G.jsx)("button",{type:"submit",className:"post-bar-btn",value:"Reply",children:Object(G.jsx)("i",{className:"fas fa-reply"})})]})})]})})),we=Object(j.b)((function(e){return{auth:e.auth}}),{removeComment:function(e,t){return function(){var a=Object(b.a)(d.a.mark((function a(n){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,m.a.delete("/api/posts/comment/".concat(e,"/").concat(t));case 3:a.sent,n({type:I,payload:t}),n(Y("Comment deleted","danger")),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),n({type:E,payload:{msg:a.t0.response.statusText,status:a.t0.response.status}});case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.auth,a=e.postId,n=e.comment,s=n._id,r=n.text,c=n.name,l=n.avatar,o=n.user,j=n.date,u=e.removeComment;return Object(G.jsxs)("div",{className:"comment p-1 my-1",children:[Object(G.jsxs)("div",{className:"col",children:[Object(G.jsx)(i.b,{to:"/profile/".concat(o),children:Object(G.jsx)("img",{src:l,alt:""})}),Object(G.jsx)("h4",{children:c})]}),Object(G.jsx)("div",{className:"comment-text",children:Object(G.jsx)("p",{className:"my-1",children:r})}),Object(G.jsxs)("div",{className:"comment-details",children:[!t.loading&&o===t.user._id&&Object(G.jsx)("button",{onClick:function(e){return u(a,s)},type:"button",className:"small-btn btn-danger",children:Object(G.jsx)("i",{className:"fas fa-times"})}),Object(G.jsxs)("small",{className:"post-date",children:["Posted on ",Object(G.jsx)(xe.a,{format:"MM/DD/YYYY",children:j})]})]})]})})),ke=Object(j.b)((function(e){return{post:e.post}}),{getPost:function(e){return function(){var t=Object(b.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.get("/api/posts/".concat(e));case 3:n=t.sent,a({type:L,payload:n.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:E,payload:{msg:t.t0.response.statusText,status:t.t0.response.status}});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.getPost,a=e.post,s=a.post,r=a.loading,c=e.match;return Object(n.useEffect)((function(){t(c.params.id)}),[t,c.params.id]),r||null===s?Object(G.jsx)(ne,{}):Object(G.jsxs)(n.Fragment,{children:[Object(G.jsx)(i.b,{to:"/posts",className:"btn btn-primary",children:"Back To Posts"}),Object(G.jsx)(ge,{post:s,showActions:!1}),Object(G.jsx)(Ne,{postId:s._id}),Object(G.jsx)("div",{className:"comments",children:s.comments.map((function(e){return Object(G.jsxs)("div",{className:"comment-container",children:[Object(G.jsx)("i",{className:"fas fa-flip-horizontal fa-comment",style:{fontSize:"5vw"}}),Object(G.jsx)(we,{comment:e,postId:s._id},e._id)]})}))})]})})),Ce=a(40),_e=["component","auth"],Fe=Object(j.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,a=e.auth,n=a.isAuth,s=a.loading,r=Object(Ce.a)(e,_e);return Object(G.jsx)(l.b,Object(K.a)(Object(K.a)({},r),{},{render:function(e){return n||s?Object(G.jsx)(t,Object(K.a)({},e)):Object(G.jsx)(l.a,{to:"/login"})}}))})),Se=a(18),Le=a(38),Te=a(39),Ae=a(25),Pe=[];var Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case h:return[].concat(Object(Ae.a)(e),[n]);case f:return e.filter((function(e){return e.id!==n}));default:return e}},Re={token:localStorage.getItem("token"),isAuth:null,loading:!0,user:null};var De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case g:return Object(K.a)(Object(K.a)({},e),{},{isAuth:!0,loading:!1,user:n});case x:case y:return localStorage.setItem("token",n.token),Object(K.a)(Object(K.a)(Object(K.a)({},e),n),{},{isAuth:!0,loading:!1});case O:case v:case N:case w:case S:return localStorage.removeItem("token"),Object(K.a)(Object(K.a)({},e),{},{token:null,isAuth:!1,loading:!1});default:return e}},Ie={profile:null,profiles:[],loading:!0,error:{}};var Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case C:return Object(K.a)(Object(K.a)({},e),{},{profile:n,loading:!1});case _:return Object(K.a)(Object(K.a)({},e),{},{profiles:n,loading:!1});case F:return Object(K.a)(Object(K.a)({},e),{},{error:n,loading:!1,profile:null});case k:return Object(K.a)(Object(K.a)({},e),{},{profile:null,loading:!1});default:return e}},Ye={posts:[],post:null,loading:!0,error:{}};var Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case T:return Object(K.a)(Object(K.a)({},e),{},{posts:n,loading:!1});case L:return Object(K.a)(Object(K.a)({},e),{},{post:n,loading:!1});case A:return Object(K.a)(Object(K.a)({},e),{},{posts:[n].concat(Object(Ae.a)(e.posts)),loading:!1});case P:return Object(K.a)(Object(K.a)({},e),{},{posts:e.posts.filter((function(e){return e._id!==n})),loading:!1});case E:return Object(K.a)(Object(K.a)({},e),{},{error:n,loading:!1});case R:return Object(K.a)(Object(K.a)({},e),{},{posts:e.posts.map((function(e){return e._id===n.id?Object(K.a)(Object(K.a)({},e),{},{likes:n.likes}):e})),loading:!1});case D:return Object(K.a)(Object(K.a)({},e),{},{post:Object(K.a)(Object(K.a)({},e.post),{},{comments:n}),loading:!1});case I:return Object(K.a)(Object(K.a)({},e),{},{post:Object(K.a)(Object(K.a)({},e.post),{},{comments:e.post.comments.filter((function(e){return e._id!==n}))}),loading:!1});default:return e}},Be=Object(Se.combineReducers)({alert:Ee,auth:De,profile:Me,post:Ue}),Ge=[Te.a],qe=Object(Se.createStore)(Be,{},Object(Le.composeWithDevTools)(Se.applyMiddleware.apply(void 0,Ge)));localStorage.token&&U(localStorage.token);var We=function(){return Object(n.useEffect)((function(){qe.dispatch(B())}),[]),Object(G.jsx)(j.a,{store:qe,children:Object(G.jsx)(i.a,{children:Object(G.jsxs)(n.Fragment,{children:[Object(G.jsx)(q,{}),Object(G.jsx)(l.b,{exact:!0,path:"/",component:J}),Object(G.jsxs)("section",{className:"container",children:[Object(G.jsx)($,{}),Object(G.jsxs)(l.d,{children:[Object(G.jsx)(l.b,{exact:!0,path:"/register",component:Z}),Object(G.jsx)(l.b,{exact:!0,path:"/login",component:X}),Object(G.jsx)(l.b,{exact:!0,path:"/profiles",component:de}),Object(G.jsx)(l.b,{exact:!0,path:"/profile/:id",component:he}),Object(G.jsx)(l.b,{exact:!0,path:"/posts",component:ye}),Object(G.jsx)(l.b,{exact:!0,path:"/posts/:id",component:ke}),Object(G.jsx)(Fe,{exact:!0,path:"/dashboard",component:re}),Object(G.jsx)(Fe,{exact:!0,path:"/create-profile",component:oe}),Object(G.jsx)(Fe,{exact:!0,path:"/edit-profile",component:je})]})]})]})})})};c.a.render(Object(G.jsx)(s.a.StrictMode,{children:Object(G.jsx)(We,{})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.156a3b11.chunk.js.map